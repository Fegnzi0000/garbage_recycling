<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$APPLICATION_CONFIG_DIR$/consoles/db/e880c9cc-450a-449e-a90f-90296b1c6b1c/console.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$APPLICATION_CONFIG_DIR$/consoles/db/e880c9cc-450a-449e-a90f-90296b1c6b1c/console.sql" />
              <option name="originalContent" value="use garbage_recycling;&#10;SHOW TABLES;&#10;DESC `address`;&#10;SHOW CREATE TABLE `address`;&#10;DESC user;&#10;SHOW CREATE TABLE user;&#10;&#10;CREATE TABLE `category` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `name` varchar(50) NOT NULL COMMENT '分类名称',&#10;    `parent_id` bigint DEFAULT NULL COMMENT '父级分类ID',&#10;    `sort` int DEFAULT '0' COMMENT '排序值',&#10;    `is_active` tinyint(1) DEFAULT '1' COMMENT '是否启用，1-启用，0-禁用',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',&#10;    PRIMARY KEY (`id`),&#10;    KEY `parent_id` (`parent_id`),&#10;    CONSTRAINT `category_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `category` (`id`)&#10;) ENGINE = InnoDB AUTO_INCREMENT = 5 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `order_rating` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `order_id` bigint NOT NULL COMMENT '订单ID',&#10;    `user_id` bigint NOT NULL COMMENT '用户ID',&#10;    `collector_id` bigint NOT NULL COMMENT '回收员ID',&#10;    `rating` tinyint NOT NULL COMMENT '评分（1-5分）',&#10;    `comment` text COMMENT '评价内容',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '评价时间',&#10;    PRIMARY KEY (`id`),&#10;    UNIQUE KEY `order_id` (`order_id`),&#10;    KEY `user_id` (`user_id`),&#10;    CONSTRAINT `order_rating_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `order` (`id`),&#10;    CONSTRAINT `order_rating_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`),&#10;    CONSTRAINT `order_rating_chk_1` CHECK ((`rating` between 1 and 5))&#10;) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `user` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `openid` varchar(255) NOT NULL COMMENT '微信openid',&#10;    `unionid` varchar(255) DEFAULT NULL COMMENT '微信unionid',&#10;    `nickname` varchar(100) DEFAULT NULL COMMENT '用户昵称',&#10;    `avatar_url` varchar(500) DEFAULT NULL COMMENT '头像URL',&#10;    `identity_type` tinyint NOT NULL DEFAULT '1' COMMENT '身份类型：1-普通用户，2-回收员，3-管理员',&#10;    `school_name` varchar(100) DEFAULT NULL COMMENT '学校名称',&#10;    `department` varchar(100) DEFAULT NULL COMMENT '院系',&#10;    `extended_info` json DEFAULT NULL COMMENT '扩展信息',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '注册时间',&#10;    `last_login_at` datetime DEFAULT NULL COMMENT '最后登录时间',&#10;    `is_active` tinyint(1) DEFAULT '1' COMMENT '是否启用，1-启用，0-禁用',&#10;    `deleted` tinyint(1) DEFAULT '0' COMMENT '逻辑删除标记',&#10;    `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',&#10;    PRIMARY KEY (`id`),&#10;    UNIQUE KEY `openid` (`openid`),&#10;    UNIQUE KEY `unionid` (`unionid`)&#10;) ENGINE = InnoDB AUTO_INCREMENT = 4 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `user_address` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `user_id` bigint NOT NULL COMMENT '用户ID',&#10;    `address_label` varchar(50) NOT NULL COMMENT '地址标签，如家/学校/公司',&#10;    `detail_address` text NOT NULL COMMENT '详细地址',&#10;    `contact_name` varchar(50) NOT NULL COMMENT '联系人姓名',&#10;    `contact_phone` varchar(20) NOT NULL COMMENT '联系电话',&#10;    `location` json DEFAULT NULL COMMENT '地理位置（经纬度等）',&#10;    `is_default` tinyint(1) DEFAULT '0' COMMENT '是否默认地址，1-是，0-否',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',&#10;    `updated_at` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',&#10;    PRIMARY KEY (`id`),&#10;    KEY `user_id` (`user_id`),&#10;    CONSTRAINT `user_address_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE&#10;) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `order` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `order_no` varchar(50) NOT NULL COMMENT '订单编号',&#10;    `user_id` bigint NOT NULL COMMENT '用户ID',&#10;    `address_id` bigint NOT NULL COMMENT '地址ID',&#10;    `order_type` tinyint NOT NULL COMMENT '订单类型',&#10;    `status` tinyint NOT NULL DEFAULT '1' COMMENT '订单状态',&#10;    `items` json NOT NULL COMMENT '订单物品明细',&#10;    `scheduled_time` datetime NOT NULL COMMENT '预约时间',&#10;    `images` json DEFAULT NULL COMMENT '订单图片',&#10;    `collector_id` bigint DEFAULT NULL COMMENT '回收员ID',&#10;    `extended_order_info` json DEFAULT NULL COMMENT '订单扩展信息',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',&#10;    `estimated_amount` decimal(10, 2) DEFAULT NULL COMMENT '预估金额',&#10;    `final_amount` decimal(10, 2) DEFAULT NULL COMMENT '最终金额',&#10;    `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',&#10;    PRIMARY KEY (`id`),&#10;    UNIQUE KEY `order_no` (`order_no`),&#10;    KEY `user_id` (`user_id`),&#10;    KEY `address_id` (`address_id`),&#10;    CONSTRAINT `order_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`),&#10;    CONSTRAINT `order_ibfk_2` FOREIGN KEY (`address_id`) REFERENCES `user_address` (`id`)&#10;) ENGINE = InnoDB AUTO_INCREMENT = 6 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;ALTER TABLE `order`&#10;    ADD COLUMN `campus_type` TINYINT NULL COMMENT '高校订单类型: 1-旧教材回收, 2-宿舍批量回收',&#10;    ADD COLUMN `campus_info` JSON NULL COMMENT '高校订单特有信息';" />
              <option name="updatedContent" value="use garbage_recycling;&#10;SHOW TABLES;&#10;DESC `address`;&#10;SHOW CREATE TABLE `address`;&#10;DESC user;&#10;SHOW CREATE TABLE user;&#10;&#10;CREATE TABLE `category` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `name` varchar(50) NOT NULL COMMENT '分类名称',&#10;    `parent_id` bigint DEFAULT NULL COMMENT '父级分类ID',&#10;    `sort` int DEFAULT '0' COMMENT '排序值',&#10;    `is_active` tinyint(1) DEFAULT '1' COMMENT '是否启用，1-启用，0-禁用',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',&#10;    PRIMARY KEY (`id`),&#10;    KEY `parent_id` (`parent_id`),&#10;    CONSTRAINT `category_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `category` (`id`)&#10;) ENGINE = InnoDB AUTO_INCREMENT = 5 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `order_rating` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `order_id` bigint NOT NULL COMMENT '订单ID',&#10;    `user_id` bigint NOT NULL COMMENT '用户ID',&#10;    `collector_id` bigint NOT NULL COMMENT '回收员ID',&#10;    `rating` tinyint NOT NULL COMMENT '评分（1-5分）',&#10;    `comment` text COMMENT '评价内容',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '评价时间',&#10;    PRIMARY KEY (`id`),&#10;    UNIQUE KEY `order_id` (`order_id`),&#10;    KEY `user_id` (`user_id`),&#10;    CONSTRAINT `order_rating_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `order` (`id`),&#10;    CONSTRAINT `order_rating_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`),&#10;    CONSTRAINT `order_rating_chk_1` CHECK ((`rating` between 1 and 5))&#10;) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `user` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `openid` varchar(255) NOT NULL COMMENT '微信openid',&#10;    `unionid` varchar(255) DEFAULT NULL COMMENT '微信unionid',&#10;    `nickname` varchar(100) DEFAULT NULL COMMENT '用户昵称',&#10;    `avatar_url` varchar(500) DEFAULT NULL COMMENT '头像URL',&#10;    `identity_type` tinyint NOT NULL DEFAULT '1' COMMENT '身份类型：1-普通用户，2-回收员，3-管理员',&#10;    `school_name` varchar(100) DEFAULT NULL COMMENT '学校名称',&#10;    `department` varchar(100) DEFAULT NULL COMMENT '院系',&#10;    `extended_info` json DEFAULT NULL COMMENT '扩展信息',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '注册时间',&#10;    `last_login_at` datetime DEFAULT NULL COMMENT '最后登录时间',&#10;    `is_active` tinyint(1) DEFAULT '1' COMMENT '是否启用，1-启用，0-禁用',&#10;    `deleted` tinyint(1) DEFAULT '0' COMMENT '逻辑删除标记',&#10;    `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',&#10;    PRIMARY KEY (`id`),&#10;    UNIQUE KEY `openid` (`openid`),&#10;    UNIQUE KEY `unionid` (`unionid`)&#10;) ENGINE = InnoDB AUTO_INCREMENT = 4 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `user_address` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `user_id` bigint NOT NULL COMMENT '用户ID',&#10;    `address_label` varchar(50) NOT NULL COMMENT '地址标签，如家/学校/公司',&#10;    `detail_address` text NOT NULL COMMENT '详细地址',&#10;    `contact_name` varchar(50) NOT NULL COMMENT '联系人姓名',&#10;    `contact_phone` varchar(20) NOT NULL COMMENT '联系电话',&#10;    `location` json DEFAULT NULL COMMENT '地理位置（经纬度等）',&#10;    `is_default` tinyint(1) DEFAULT '0' COMMENT '是否默认地址，1-是，0-否',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',&#10;    `updated_at` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',&#10;    PRIMARY KEY (`id`),&#10;    KEY `user_id` (`user_id`),&#10;    CONSTRAINT `user_address_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE&#10;) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;CREATE TABLE `order` (&#10;    `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',&#10;    `order_no` varchar(50) NOT NULL COMMENT '订单编号',&#10;    `user_id` bigint NOT NULL COMMENT '用户ID',&#10;    `address_id` bigint NOT NULL COMMENT '地址ID',&#10;    `order_type` tinyint NOT NULL COMMENT '订单类型',&#10;    `status` tinyint NOT NULL DEFAULT '1' COMMENT '订单状态',&#10;    `items` json NOT NULL COMMENT '订单物品明细',&#10;    `scheduled_time` datetime NOT NULL COMMENT '预约时间',&#10;    `images` json DEFAULT NULL COMMENT '订单图片',&#10;    `collector_id` bigint DEFAULT NULL COMMENT '回收员ID',&#10;    `extended_order_info` json DEFAULT NULL COMMENT '订单扩展信息',&#10;    `created_at` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',&#10;    `estimated_amount` decimal(10, 2) DEFAULT NULL COMMENT '预估金额',&#10;    `final_amount` decimal(10, 2) DEFAULT NULL COMMENT '最终金额',&#10;    `updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',&#10;    PRIMARY KEY (`id`),&#10;    UNIQUE KEY `order_no` (`order_no`),&#10;    KEY `user_id` (`user_id`),&#10;    KEY `address_id` (`address_id`),&#10;    CONSTRAINT `order_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`),&#10;    CONSTRAINT `order_ibfk_2` FOREIGN KEY (`address_id`) REFERENCES `user_address` (`id`)&#10;) ENGINE = InnoDB AUTO_INCREMENT = 6 DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci;&#10;&#10;ALTER TABLE `order`&#10;    ADD COLUMN `campus_type` TINYINT NULL COMMENT '高校订单类型: 1-旧教材回收, 2-宿舍批量回收',&#10;    ADD COLUMN `campus_info` JSON NULL COMMENT '高校订单特有信息';" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>